<?php
/**
 * Copyright Â© 2013-2017 Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

// @codingStandardsIgnoreFile

?>
<?php
/**
 * Category view template
 *
 * @var $block \Magento\Catalog\Block\Category\View
 */
?>
<?php if ($_description = $block->getCurrentCategory()->getDescription()): ?>
    <div class="category-description" id="short">
        <?php
        $string = strip_tags($this->helper('Magento\Catalog\Helper\Output')->categoryAttribute($block->getCurrentCategory(), $_description, 'description'));

        if (strlen($string) > 200) {
            $stringCut = substr($string, 0, 200);
            $string = substr($stringCut, 0, strrpos($stringCut, ' ')).'...';
        }

        echo $string;
        ?>
    </div>
	
    <div class="category-description" id="more">
        <?php echo $this->helper('Magento\Catalog\Helper\Output')->categoryAttribute($block->getCurrentCategory(), $_description, 'description'); ?>
	</div>
	
	<button onclick="readmore()" id="myBtn">Read more</button>
	
	<script>
		function readmore() {
			var moreText = document.getElementById("more");
			var shortText = document.getElementById("short");
			var btnText = document.getElementById("myBtn");

			if (btnText.innerHTML === "Read more") {
				btnText.innerHTML = "Read less";
				moreText.style.display = "block";
				shortText.style.display = "none";
			} else {
				btnText.innerHTML = "Read more";
				moreText.style.display = "none";
				shortText.style.display = "block";
		  }
		}
	</script>
	
<?php endif; ?>